{"name":"getLastWeekDailyStepsGoal","category":"view","description":"For PIANISSIMO - Get number of steps per day set as a goal by the patient from previous week (for the graph in the weekly goal step decision)","metaData":"{\r\n    \"parameters\": [\r\n        {\r\n            \"name\": \"from\",\r\n            \"type\": \"string\",\r\n            \"format\": \"date-time\",\r\n            \"description\": \"Limit by date from\"\r\n        },\r\n        {\r\n            \"name\": \"to\",\r\n            \"type\": \"string\",\r\n            \"format\": \"date-time\",\r\n            \"description\": \"Limit by date to\"\r\n        }\r\n    ]\r\n}","steps":[{"processorName":"jsonFtlAql","processorData":"SELECT \r\nq/activities[at0001]/description[at0002]/items[at0035]/value/magnitude AS steps_daily_goal,\r\nc/context/start_time/value as commit_date\r\nFROM EHR e\r\nCONTAINS COMPOSITION c[openEHR-EHR-COMPOSITION.self_reported_data.v1] \r\nCONTAINS INSTRUCTION q[openEHR-EHR-INSTRUCTION.physical_activity.v0] \r\nWHERE c/name/value='PIANISSIMO - Weekly walk objectives' AND e/ehr_id/value = :ehrId\r\n<#if ctx.vars.from??>and c/context/start_time/value >= :from</#if>\r\n<#if ctx.vars.to??>and c/context/start_time/value <= :to</#if>\r\nORDER BY commit_date DESC\r\nOFFSET :offset FETCH :limit"}]}