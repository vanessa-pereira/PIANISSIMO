{"name":"getLastWeekDailySteps","category":"view","description":"For PIANISSIMO - Get number of steps per day from previous week","metaData":"{\r\n    \"parameters\": [\r\n        {\r\n            \"name\": \"from\",\r\n            \"type\": \"string\",\r\n            \"format\": \"date-time\",\r\n            \"description\": \"Limit by date from\"\r\n        },\r\n        {\r\n            \"name\": \"to\",\r\n            \"type\": \"string\",\r\n            \"format\": \"date-time\",\r\n            \"description\": \"Limit by date to\"\r\n        }\r\n    ]\r\n}","steps":[{"processorName":"jsonFtlAql","processorData":"SELECT \r\na/data[at0001]/events[at0002]/data[at0003]/items[at0081]/value/magnitude AS steps,\r\na/data[at0001]/events[at0002]/data[at0003]/items[at0081]/value/units AS steps_unit,\r\nc/context/start_time/value as commit_date\r\nFROM EHR e\r\nCONTAINS COMPOSITION c\r\nCONTAINS OBSERVATION a[openEHR-EHR-OBSERVATION.empower_physical_exercises.v0] \r\nWHERE c/name/value='PIANISSIMO - Observations' AND e/ehr_id/value = :ehrId\r\n<#if ctx.vars.from??>and c/context/start_time/value >= :from</#if>\r\n<#if ctx.vars.to??>and c/context/start_time/value <= :to</#if>\r\nORDER BY commit_date DESC\r\nOFFSET :offset FETCH :limit"}]}