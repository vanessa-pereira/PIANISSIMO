{"name":"getCompositionUid","category":"view","description":"Get composition uid by providing ehrId and templateId","metaData":"{\r\n    \"parameters\": [\r\n        {\r\n            \"name\": \"ehrId\",\r\n            \"description\": \"Ehr id\",\r\n            \"type\": \"string\"\r\n        },\r\n        {\r\n            \"name\": \"templateId\",\r\n            \"description\": \"template id\",\r\n            \"type\": \"string\"\r\n        }\r\n    ]\r\n}","steps":[{"processorName":"jsonFtlAql","processorData":"-- Authors: Vanessa Pereira (vanessa.pereira@lih.lu) and Mahsa Moein (mahsa.moein@lih.lu)\r\n\r\nSELECT c/uid/value AS compositionUid,\r\n       u/items[at0001]/value/value AS md5Hash,\r\n       '' AS formVersion\r\nFROM EHR e\r\nCONTAINS COMPOSITION c\r\nCONTAINS CLUSTER u[openEHR-EHR-CLUSTER.nifi_input.v0]\r\nwhere c/archetype_details/template_id/value= :templateId AND e/ehr_id/value = :ehrId"}]}