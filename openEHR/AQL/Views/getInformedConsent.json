{"name":"getInformedConsent","category":"view","description":"Get informed consent status and metadata","metaData":"{\r\n    \"parameters\": [\r\n        {\r\n            \"name\": \"ehrId\",\r\n            \"description\": \"Ehr id\",\r\n            \"type\": \"string\"\r\n        }\r\n    ]\r\n}","steps":[{"processorName":"jsonFtlAql","processorData":"-- openEHR Template required: \"CLINNOVA IBD eCRF - Informed consent\" v0.1.15\r\n-- Authors: Vanessa Pereira (vanessa.pereira@lih.lu)\r\n\r\nSELECT \r\n       j/ism_transition/careflow_step/value AS consentCareflowStep,\r\n       j/ism_transition/current_state/value AS consentState,\r\n       j/time/value as consentLastUpdated,\r\n       c/context/start_time/value as compositionSubmittedMedicalTeam,\r\n       c/uid/value as templateUid,\r\n       c/archetype_details/template_id/value as templateID,\r\n       v/commit_audit/time_committed/value as compositionCommittedServerTime,\r\n       e/ehr_status/subject/external_ref/id/value AS subjectId,\r\n       e/ehr_status/subject/external_ref/namespace as namespaceId\r\nFROM EHR e\r\nCONTAINS VERSIONED_OBJECT vo\r\nCONTAINS VERSION v\r\nCONTAINS COMPOSITION c[openEHR-EHR-COMPOSITION.encounter.v1]\r\nCONTAINS ACTION j[openEHR-EHR-ACTION.informed_consent.v0] \r\nWHERE c/name/value='CLINNOVA IBD eCRF - Informed consent' AND e/ehr_id/value = :ehrId\r\nORDER BY compositionSubmittedMedicalTeam DESC"}]}