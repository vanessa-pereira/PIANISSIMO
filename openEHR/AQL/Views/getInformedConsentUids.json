{"name":"getInformedConsentUids","category":"view","description":"Get all uids of informed consent composition for an ehrId","metaData":"{\r\n    \"parameters\": [\r\n        {\r\n            \"name\": \"ehrId\",\r\n            \"description\": \"ehr id\",\r\n            \"type\": \"string\"\r\n        }\r\n    ]\r\n}","steps":[{"processorName":"jsonFtlAql","processorData":"-- openEHR Template required: \"CLINNOVA IBD eCRF - Informed consent\" v0.1.15\r\n-- Authors: Vanessa Pereira (vanessa.pereira@lih.lu) and Mahsa Moein (mahsa.moein@lih.lu)\r\n\r\nSELECT c/uid/value as compositionUid,\r\n       j/protocol[at0024]/items[at0025,'ICF version number']/value/value AS formVersion,\r\n       j/time/value as consentLastUpdated,\r\n       u/items[at0001]/value/value AS md5Hash \r\nFROM EHR e  \r\nCONTAINS COMPOSITION c  \r\nCONTAINS (ACTION j[openEHR-EHR-ACTION.informed_consent.v0] \r\n    AND CLUSTER u[openEHR-EHR-CLUSTER.nifi_input.v0])  \r\nWHERE c/name/value='CLINNOVA IBD eCRF - Informed consent' AND e/ehr_id/value = :ehrId  \r\nORDER BY consentLastUpdated DESC"}]}